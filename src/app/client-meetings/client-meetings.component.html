<section class="dispatchDashboard">
    <div  class="tableContainer">
        <div class="title">
            <div class="titleImgContainer">
                <i class="bi bi-geo-alt"></i>
                <h2>Client Meetings</h2>
            </div>
            <a href="/dispatches/new">
                <div class="newBtn">
                    <i class="bi bi-plus-circle"></i> New Dispatch
                </div>
            </a>  
        </div>
        <hr>
        <table class="dispatchTable searchable table" 
            data-sort-name="pickupDate" 
            data-sort-order="desc"
            data-toggle="table" 
            data-pagination="true"
            data-search="true" >
            <thead>
                <tr>
                    <th></th>
                    <th class="text-center" data-field="proNumber" data-sortable="true">
                        <div>
                            Pro #
                        </div>
                    </th>
                    <th data-field="status" data-sortable="true">
                            <div >
                                Status
                        </div>
                    </th>
                    <th class="text-center" data-field="unit" data-sortable="true">
                        <div>
                            Unit
                        </div>
                    </th>
                    <th data-field="driver" data-sortable="true">
                        <div>
                            Driver
                        </div>
                    </th>
                    <th data-field="pickupDate" data-sortable="true">
                        <div>
                            Picked-up
                        </div>
                    </th>
                    <th><i class="bi bi-geo"></i>  Origin</th>
                    <th><i class="bi bi-geo-alt"></i> Destination</th>
                    <th data-field="deliverDate" data-sortable="true">
                        <div>
                            Delivered
                        </div>
                    </th>
                    <th class="text-center col-sm-auto">Trip Miles</th>
                    <th>Duration</th>
                    <!-- <th class="text-center">Pay Rate</th> -->
                    <th class="text-center">Drivers Pay</th>
                    
                    <th>Customer</th>
                </tr>
            </thead>    
            <tbody>
                <!-- <% for(let dispatch of dispatches) { %>
                <tr class="<%= dispatch.status %>">
                    <td><a href="/dispatches/<%= dispatch._id %>"><i class="bi bi-info-circle"></i></a></td>
                    <td># <%= dispatch.proNumber %></td>
                    <td class="status" value="<%= dispatch.status %>"><%= dispatch.status %></td>
                    <td># <%= dispatch.unit %></td>
                    <td><%= dispatch.driver %></td>
                    <td><%= dispatch.pickupDate %></td>
                    <td><%= dispatch.origin %></td>
                    <td><%= dispatch.destination %></td>
                    <td><%= dispatch.deliverDate %></td>
                    <td><%= dispatch.tripMiles %> ml</td>
                    <td><%= dispatch.duration %></td>
                    <td><%= dispatch.payRate %></td>
                    <td>$<%= dispatch.grossPay %></td>
                    <td><%= dispatch.customer %></td>
                </tr>
                <% } %> -->
            </tbody>
        </table>
        </div>
    <!-- </div> -->
</section>

<script>
    const rows = document.querySelectorAll('tr'); 
    // Loop through rows
    rows.forEach(row => {
    // Check if row has specific class
    if(row.classList.contains('Dispatched')) {
    row.style.backgroundColor = 'rgb(53, 196, 98, .1)';
    }else if(row.classList.contains('Pending')) {
        row.style.backgroundColor = ' rgb(255, 195, 189, 0.5)';
    }
    else if(row.classList.contains('Paid')) {
        row.style.backgroundColor = 'rgb(171, 171, 171, .5)';
    }
});
</script> 